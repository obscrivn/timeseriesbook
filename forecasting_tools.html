
<!DOCTYPE html>

<html>
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Forecasting Workflow &#8212; D-590 Time Series Analysis</title>
    
  <link href="_static/css/theme.css" rel="stylesheet">
  <link href="_static/css/index.ff1ffe594081f20da1ef19478df9384b.css" rel="stylesheet">

    
  <link rel="stylesheet"
    href="_static/vendor/fontawesome/5.13.0/css/all.min.css">
  <link rel="preload" as="font" type="font/woff2" crossorigin
    href="_static/vendor/fontawesome/5.13.0/webfonts/fa-solid-900.woff2">
  <link rel="preload" as="font" type="font/woff2" crossorigin
    href="_static/vendor/fontawesome/5.13.0/webfonts/fa-brands-400.woff2">

    
      

    
    <link rel="stylesheet" href="_static/sphinx-book-theme.css?digest=c3fdc42140077d1ad13ad2f1588a4309" type="text/css" />
    <link rel="stylesheet" href="_static/pygments.css" type="text/css" />
    <link rel="stylesheet" type="text/css" href="_static/togglebutton.css" />
    <link rel="stylesheet" type="text/css" href="_static/copybutton.css" />
    <link rel="stylesheet" type="text/css" href="_static/mystnb.css" />
    <link rel="stylesheet" type="text/css" href="_static/sphinx-thebe.css" />
    <link rel="stylesheet" type="text/css" href="_static/panels-main.c949a650a448cc0ae9fd3441c0e17fb0.css" />
    <link rel="stylesheet" type="text/css" href="_static/panels-variables.06eb56fa6e07937060861dad626602ad.css" />
    
  <link rel="preload" as="script" href="_static/js/index.be7d3bbb2ef33a8344ce.js">

    <script id="documentation_options" data-url_root="./" src="_static/documentation_options.js"></script>
    <script src="_static/jquery.js"></script>
    <script src="_static/underscore.js"></script>
    <script src="_static/doctools.js"></script>
    <script src="_static/language_data.js"></script>
    <script src="_static/togglebutton.js"></script>
    <script src="_static/clipboard.min.js"></script>
    <script src="_static/copybutton.js"></script>
    <script >var togglebuttonSelector = '.toggle, .admonition.dropdown, .tag_hide_input div.cell_input, .tag_hide-input div.cell_input, .tag_hide_output div.cell_output, .tag_hide-output div.cell_output, .tag_hide_cell.cell, .tag_hide-cell.cell';</script>
    <script src="_static/sphinx-book-theme.12a9622fbb08dcb3a2a40b2c02b83a57.js"></script>
    <script async="async" src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.7/latest.js?config=TeX-AMS-MML_HTMLorMML"></script>
    <script type="text/x-mathjax-config">MathJax.Hub.Config({"tex2jax": {"processClass": "tex2jax_process|mathjax_process|math|output_area"}})</script>
    <script async="async" src="https://unpkg.com/thebe@0.5.1/lib/index.js"></script>
    <script >
        const thebe_selector = ".thebe"
        const thebe_selector_input = "pre"
        const thebe_selector_output = ".output"
    </script>
    <script async="async" src="_static/sphinx-thebe.js"></script>
    <script async="async" src="https://unpkg.com/thebe@0.5.1/lib/index.js"></script>
    <script >
        const thebe_selector = ".thebe"
        const thebe_selector_input = "pre"
        const thebe_selector_output = ".output"
    </script>
    <script async="async" src="_static/sphinx-thebe.js"></script>
    <script async="async" src="https://unpkg.com/thebe@0.5.1/lib/index.js"></script>
    <script >
        const thebe_selector = ".thebe"
        const thebe_selector_input = "pre"
        const thebe_selector_output = ".output"
    </script>
    <script async="async" src="_static/sphinx-thebe.js"></script>
    <script async="async" src="https://unpkg.com/thebe@0.5.1/lib/index.js"></script>
    <script >
        const thebe_selector = ".thebe"
        const thebe_selector_input = "pre"
        const thebe_selector_output = ".output"
    </script>
    <script async="async" src="_static/sphinx-thebe.js"></script>
    <script async="async" src="https://unpkg.com/thebe@0.5.1/lib/index.js"></script>
    <script >
        const thebe_selector = ".thebe"
        const thebe_selector_input = "pre"
        const thebe_selector_output = ".output"
    </script>
    <script async="async" src="_static/sphinx-thebe.js"></script>
    <script async="async" src="https://unpkg.com/thebe@0.5.1/lib/index.js"></script>
    <script >
        const thebe_selector = ".thebe"
        const thebe_selector_input = "pre"
        const thebe_selector_output = ".output"
    </script>
    <script async="async" src="_static/sphinx-thebe.js"></script>
    <link rel="index" title="Index" href="genindex.html" />
    <link rel="search" title="Search" href="search.html" />
    <link rel="next" title="ARIMA Models" href="week6.html" />
    <link rel="prev" title="White Noise and Random Walk" href="random_walk.html" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <meta name="docsearch:language" content="None">
    

    <!-- Google Analytics -->
    
  </head>
  <body data-spy="scroll" data-target="#bd-toc-nav" data-offset="80">
    
    <div class="container-fluid" id="banner"></div>

    

    <div class="container-xl">
      <div class="row">
          
<div class="col-12 col-md-3 bd-sidebar site-navigation show" id="site-navigation">
    
        <div class="navbar-brand-box">
    <a class="navbar-brand text-wrap" href="index.html">
      
        <!-- `logo` is deprecated in Sphinx 4.0, so remove this when we stop supporting 3 -->
        
      
      
      <img src="_static/logo.png" class="logo" alt="logo">
      
      
      <h1 class="site-logo" id="site-title">D-590 Time Series Analysis</h1>
      
    </a>
</div><form class="bd-search d-flex align-items-center" action="search.html" method="get">
  <i class="icon fas fa-search"></i>
  <input type="search" class="form-control" name="q" id="search-input" placeholder="Search this book..." aria-label="Search this book..." autocomplete="off" >
</form><nav class="bd-links" id="bd-docs-nav" aria-label="Main">
    <div class="bd-toc-item active">
        <ul class="nav bd-sidenav">
 <li class="toctree-l1">
  <a class="reference internal" href="welcome.html">
   Welcome to D-590 Time Series Spring 22
  </a>
 </li>
</ul>
<ul class="current nav bd-sidenav">
 <li class="toctree-l1 has-children">
  <a class="reference internal" href="week1.html">
   Introduction
  </a>
  <input class="toctree-checkbox" id="toctree-checkbox-1" name="toctree-checkbox-1" type="checkbox"/>
  <label for="toctree-checkbox-1">
   <i class="fas fa-chevron-down">
   </i>
  </label>
  <ul>
   <li class="toctree-l2">
    <a class="reference internal" href="intro.html">
     Basic Concepts
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="tsibbles.html">
     Introduction to Tsibbles
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="plots.html">
     Graphics
    </a>
   </li>
  </ul>
 </li>
 <li class="toctree-l1 has-children">
  <a class="reference internal" href="week2.html">
   Decomposition
  </a>
  <input class="toctree-checkbox" id="toctree-checkbox-2" name="toctree-checkbox-2" type="checkbox"/>
  <label for="toctree-checkbox-2">
   <i class="fas fa-chevron-down">
   </i>
  </label>
  <ul>
   <li class="toctree-l2">
    <a class="reference internal" href="autocorrelation.html">
     Autocorrelation Practice
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="smoothing.html">
     Smoothing
    </a>
   </li>
  </ul>
 </li>
 <li class="toctree-l1 has-children">
  <a class="reference internal" href="week4.html">
   Feature Engineering
  </a>
  <input class="toctree-checkbox" id="toctree-checkbox-3" name="toctree-checkbox-3" type="checkbox"/>
  <label for="toctree-checkbox-3">
   <i class="fas fa-chevron-down">
   </i>
  </label>
  <ul>
   <li class="toctree-l2">
    <a class="reference internal" href="features.html">
     Features
    </a>
   </li>
  </ul>
 </li>
 <li class="toctree-l1 current active has-children">
  <a class="reference internal" href="week5.html">
   Forecasting Methods
  </a>
  <input checked="" class="toctree-checkbox" id="toctree-checkbox-4" name="toctree-checkbox-4" type="checkbox"/>
  <label for="toctree-checkbox-4">
   <i class="fas fa-chevron-down">
   </i>
  </label>
  <ul class="current">
   <li class="toctree-l2">
    <a class="reference internal" href="random_walk.html">
     White Noise and Random Walk
    </a>
   </li>
   <li class="toctree-l2 current active">
    <a class="current reference internal" href="#">
     Forecasting Workflow
    </a>
   </li>
  </ul>
 </li>
 <li class="toctree-l1 has-children">
  <a class="reference internal" href="week6.html">
   ARIMA Models
  </a>
  <input class="toctree-checkbox" id="toctree-checkbox-5" name="toctree-checkbox-5" type="checkbox"/>
  <label for="toctree-checkbox-5">
   <i class="fas fa-chevron-down">
   </i>
  </label>
  <ul>
   <li class="toctree-l2">
    <a class="reference internal" href="arima.html">
     ARIMA Models
    </a>
   </li>
  </ul>
 </li>
 <li class="toctree-l1 has-children">
  <a class="reference internal" href="week7.html">
   Regression Models
  </a>
  <input class="toctree-checkbox" id="toctree-checkbox-6" name="toctree-checkbox-6" type="checkbox"/>
  <label for="toctree-checkbox-6">
   <i class="fas fa-chevron-down">
   </i>
  </label>
  <ul>
   <li class="toctree-l2">
    <a class="reference internal" href="regression.html">
     Regression Models
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="ts_python.html">
     Introduction to Time series in Python
    </a>
   </li>
  </ul>
 </li>
 <li class="toctree-l1 has-children">
  <a class="reference internal" href="week8.html">
   Non-Linear Models
  </a>
  <input class="toctree-checkbox" id="toctree-checkbox-7" name="toctree-checkbox-7" type="checkbox"/>
  <label for="toctree-checkbox-7">
   <i class="fas fa-chevron-down">
   </i>
  </label>
  <ul>
   <li class="toctree-l2">
    <a class="reference internal" href="decomposition.html">
     Decomposition
    </a>
   </li>
  </ul>
 </li>
 <li class="toctree-l1 has-children">
  <a class="reference internal" href="week9.html">
   Deep Learning
  </a>
  <input class="toctree-checkbox" id="toctree-checkbox-8" name="toctree-checkbox-8" type="checkbox"/>
  <label for="toctree-checkbox-8">
   <i class="fas fa-chevron-down">
   </i>
  </label>
  <ul>
   <li class="toctree-l2">
    <a class="reference internal" href="mlp.html">
     Multilayer Perceptrons for Time Series
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="arima_python.html">
     ARIMA in Python
    </a>
   </li>
  </ul>
 </li>
</ul>

    </div>
</nav> <!-- To handle the deprecated key -->

<div class="navbar_extra_footer">
  Powered by <a href="https://jupyterbook.org">Jupyter Book</a>
</div>

</div>


          


          
<main class="col py-md-3 pl-md-4 bd-content overflow-auto" role="main">
    
    <div class="topbar container-xl fixed-top">
    <div class="topbar-contents row">
        <div class="col-12 col-md-3 bd-topbar-whitespace site-navigation show"></div>
        <div class="col pl-md-4 topbar-main">
            
            <button id="navbar-toggler" class="navbar-toggler ml-0" type="button" data-toggle="collapse"
                data-toggle="tooltip" data-placement="bottom" data-target=".site-navigation" aria-controls="navbar-menu"
                aria-expanded="true" aria-label="Toggle navigation" aria-controls="site-navigation"
                title="Toggle navigation" data-toggle="tooltip" data-placement="left">
                <i class="fas fa-bars"></i>
                <i class="fas fa-arrow-left"></i>
                <i class="fas fa-arrow-up"></i>
            </button>
            
            
<div class="dropdown-buttons-trigger">
    <button id="dropdown-buttons-trigger" class="btn btn-secondary topbarbtn" aria-label="Download this page"><i
            class="fas fa-download"></i></button>

    <div class="dropdown-buttons">
        <!-- ipynb file if we had a myst markdown file -->
        
        <!-- Download raw file -->
        <a class="dropdown-buttons" href="_sources/forecasting_tools.md"><button type="button"
                class="btn btn-secondary topbarbtn" title="Download source file" data-toggle="tooltip"
                data-placement="left">.md</button></a>
        <!-- Download PDF via print -->
        <button type="button" id="download-print" class="btn btn-secondary topbarbtn" title="Print to PDF"
            onClick="window.print()" data-toggle="tooltip" data-placement="left">.pdf</button>
    </div>
</div>

            <!-- Source interaction buttons -->

<div class="dropdown-buttons-trigger">
    <button id="dropdown-buttons-trigger" class="btn btn-secondary topbarbtn"
        aria-label="Connect with source repository"><i class="fab fa-github"></i></button>
    <div class="dropdown-buttons sourcebuttons">
        <a class="repository-button"
            href="https://github.com/executablebooks/jupyter-book"><button type="button" class="btn btn-secondary topbarbtn"
                data-toggle="tooltip" data-placement="left" title="Source repository"><i
                    class="fab fa-github"></i>repository</button></a>
        <a class="issues-button"
            href="https://github.com/executablebooks/jupyter-book/issues/new?title=Issue%20on%20page%20%2Fforecasting_tools.html&body=Your%20issue%20content%20here."><button
                type="button" class="btn btn-secondary topbarbtn" data-toggle="tooltip" data-placement="left"
                title="Open an issue"><i class="fas fa-lightbulb"></i>open issue</button></a>
        
    </div>
</div>

            <!-- Full screen (wrap in <a> to have style consistency -->

<a class="full-screen-button"><button type="button" class="btn btn-secondary topbarbtn" data-toggle="tooltip"
        data-placement="bottom" onclick="toggleFullScreen()" aria-label="Fullscreen mode"
        title="Fullscreen mode"><i
            class="fas fa-expand"></i></button></a>

            <!-- Launch buttons -->

        </div>

        <!-- Table of contents -->
        <div class="d-none d-md-block col-md-2 bd-toc show">
            
            <div class="tocsection onthispage pt-5 pb-3">
                <i class="fas fa-list"></i> Contents
            </div>
            <nav id="bd-toc-nav" aria-label="Page">
                <ul class="visible nav section-nav flex-column">
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#request">
   Request
  </a>
 </li>
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#technical-setup-questions">
   Technical Setup Questions
  </a>
 </li>
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#data-treatement-questions">
   Data Treatement Questions
  </a>
 </li>
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#analysis-questions">
   Analysis Questions
  </a>
 </li>
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#modeling">
   Modeling
  </a>
 </li>
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#simple-forecasting-models">
   Simple Forecasting Models
  </a>
  <ul class="nav section-nav flex-column">
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#average-mean-method">
     Average / Mean Method
    </a>
   </li>
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#naive-method">
     Naive Method
    </a>
   </li>
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#seasonal-naive-method">
     Seasonal Naive Method
    </a>
   </li>
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#drift-method">
     Drift Method
    </a>
   </li>
  </ul>
 </li>
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#residual-diagnostics">
   Residual Diagnostics
  </a>
 </li>
</ul>

            </nav>
        </div>
    </div>
</div>
    <div id="main-content" class="row">
        <div class="col-12 col-md-9 pl-md-3 pr-md-0">
        
              <div>
                
  <div class="section" id="forecasting-workflow">
<h1>Forecasting Workflow<a class="headerlink" href="#forecasting-workflow" title="Permalink to this headline">¶</a></h1>
<p><small><a class="reference external" href="https://towardsdatascience.com/a-lean-forecasting-workflow-1a8a5eb2d4ab">Arthur Mello. 2019. A Lean Forecasting Workflow</a></small></p>
<p><small>Forecasting: Principle and practice. Chapter 5. Rob Hyndman and George Athanasopoulos. </small></p>
<div class="section" id="request">
<h2>Request<a class="headerlink" href="#request" title="Permalink to this headline">¶</a></h2>
<p>First, you need to develop your business understanding:</p>
<ul class="simple">
<li><p>What is the goal for these forecasts (understanding the overall structure of your revenue income, guiding production decisions, reporting to shareholders…)?</p></li>
<li><p>How will they be used (should they be sent to a dashboard or will they be sent to another automated system)?</p></li>
<li><p>Who will use them (is it someone who is well-versed in data science, the company’s CEO, investors…)?</p></li>
<li><p>Who will maintain them?</p></li>
<li><p>At what level (overall, by store, by product…)?</p></li>
<li><p>At what time frame (weekly, monthly…)?</p></li>
<li><p>How long in advance will we generate forecasts (for the next week, the next year…)?</p></li>
<li><p>Is there external data to be used (weather, holidays…)?
<small>Source: Arthur Mello. 2019.</small></p></li>
</ul>
</div>
<div class="section" id="technical-setup-questions">
<h2>Technical Setup Questions<a class="headerlink" href="#technical-setup-questions" title="Permalink to this headline">¶</a></h2>
<p>This is where you choose the tools and also workflow design.</p>
<ul class="simple">
<li><p>Some experts recommend to have one  notebook for each step: data treatment, analysis and modelling</p></li>
<li><p>Document your data sources, how they are collected, stored and merged, and where your scripts will be</p></li>
</ul>
</div>
<div class="section" id="data-treatement-questions">
<h2>Data Treatement Questions<a class="headerlink" href="#data-treatement-questions" title="Permalink to this headline">¶</a></h2>
<ul class="simple">
<li><p>Data Collection:</p>
<ul>
<li><p>Queries from a database, web scrapping etc.</p></li>
<li><p>Consider the levels of aggregation needed, external variables and timeframes.</p></li>
</ul>
</li>
<li><p>Data Cleaning</p>
<ul>
<li><p>How to deal with outliers and missing values</p></li>
</ul>
</li>
<li><p>Feature Engineering</p>
<ul>
<li><p>What additional features would help you discover additional patterns (expert knowledge, apriori knowledge)?</p></li>
</ul>
</li>
</ul>
</div>
<div class="section" id="analysis-questions">
<h2>Analysis Questions<a class="headerlink" href="#analysis-questions" title="Permalink to this headline">¶</a></h2>
<ul class="simple">
<li><p>Is there a trend?</p></li>
<li><p>Is this time series stationary?</p></li>
<li><p>Is there seasonality? At what levels (daily, weekly…)?</p></li>
<li><p>If there are external variables, how do they interact with each other (especially with the variable you are trying to predict)?</p></li>
<li><p>What is the appropriate error measure for evaluation?</p></li>
</ul>
<p><img alt="" src="_images/for3.png" /></p>
</div>
<div class="section" id="modeling">
<h2>Modeling<a class="headerlink" href="#modeling" title="Permalink to this headline">¶</a></h2>
<p><small><a class="reference external" href="https://cran.r-project.org/web/packages/fable/vignettes/fable.html">fable</a></small></p>
<blockquote>
<div><p>The R package fable provides a collection of commonly used univariate and multivariate time series forecasting models including exponential smoothing via state space models and automatic ARIMA modelling.</p>
</div></blockquote>
<ul class="simple">
<li><p><strong>Model Function</strong>: The response variable (y) is specified on the left of the formula, and the model is written on the right.</p></li>
</ul>
<p><img alt="" src="_images/mod1.png" /></p>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">model()</span></code>s function is used to estimate these model specifications on a particular dataset, and will return a model table.</p></li>
</ul>
<p><img alt="" src="_images/mod2.png" /></p>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">coef()</span></code> function is used to extract the coefficients from the models. It is possible to use filter() and select() to focus on the coefficients from a particular model.</p></li>
</ul>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">fit</span> <span class="o">%&gt;%</span> <span class="nb">filter</span><span class="p">(</span><span class="n">Country</span> <span class="o">==</span> <span class="s1">&#39;United States&#39;</span><span class="p">)</span> <span class="o">%&gt;%</span> <span class="n">coef</span><span class="p">()</span>
</pre></div>
</div>
<p><img alt="" src="_images/mod3.png" /></p>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">glance()</span></code>  provides a one-row summary of each model, and commonly includes descriptions of the model’s fit such as the residual variance and information criteria.</p></li>
</ul>
<p><img alt="" src="_images/mod4.png" /></p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>information criteria (AIC, AICc, BIC) are only comparable between the same model class and only if those models share the same response (after transformations and differencing).</p>
</div>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">report()</span></code> provides a formatted model-specific display</p></li>
</ul>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">fit</span> <span class="o">%&gt;%</span> <span class="nb">filter</span><span class="p">(</span><span class="n">Country</span> <span class="o">==</span> <span class="s1">&#39;United States&#39;</span><span class="p">)</span> <span class="o">%&gt;%</span>
  <span class="n">report</span><span class="p">()</span>
</pre></div>
</div>
<p><img alt="" src="_images/mod5.png" /></p>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">accuracy()</span></code> provides common accuracy measures</p></li>
</ul>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">fit</span> <span class="o">%&gt;%</span> <span class="nb">filter</span><span class="p">(</span><span class="n">Country</span> <span class="o">==</span> <span class="s1">&#39;United States&#39;</span><span class="p">)</span> <span class="o">%&gt;%</span>
  <span class="n">accuracy</span><span class="p">()</span>
</pre></div>
</div>
<p><img alt="" src="_images/mod6.png" /></p>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">forecast()</span></code> is used when the appropriate model is built. We specify the number of future observations to forecast. For example, <code class="docutils literal notranslate"><span class="pre">h</span> <span class="pre">=</span> <span class="pre">10</span></code> forecasts for the next 10 observations; <code class="docutils literal notranslate"><span class="pre">h</span> <span class="pre">=</span> <span class="pre">&quot;2</span> <span class="pre">years&quot;</span></code> forecasts for two years into the future.</p></li>
</ul>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">fit</span> <span class="o">%&gt;%</span> <span class="n">forecast</span><span class="p">(</span><span class="n">h</span> <span class="o">=</span> <span class="s2">&quot;3 years&quot;</span><span class="p">)</span>
</pre></div>
</div>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">augment()</span></code> function provides the original data with both fitted values and their residuals</p>
<ul>
<li><p>The fitted values and residuals can also be obtained using fitted() and residuals()</p></li>
</ul>
</li>
<li><p>Residuals are useful in checking whether a model has adequately captured the information in the data</p></li>
</ul>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">fit</span> <span class="o">%&gt;%</span>
  <span class="nb">filter</span><span class="p">(</span><span class="n">Country</span> <span class="o">==</span> <span class="s2">&quot;Sweden&quot;</span><span class="p">)</span> <span class="o">%&gt;%</span>
  <span class="n">augment</span><span class="p">(</span><span class="n">fit</span><span class="p">)</span>
</pre></div>
</div>
<p><img alt="" src="_images/mod13.png" /></p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span> - .fitted contains the fitted values;
 - .resid contains the residuals;
 - .innov contains the “innovation residuals”
</pre></div>
</div>
<div class="admonition note">
<p class="admonition-title">Note</p>
<ul class="simple">
<li><p><strong>Fitted Values</strong> = predicted values based on previous observations</p></li>
<li><p><strong>Residuals</strong> = The residuals are equal to the difference between the observations and the corresponding fitted values</p></li>
<li><p><strong>innovation residuals</strong> = residuals on the transformed scale</p></li>
</ul>
</div>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">hilo()</span></code> function extracts confidence intervals</p></li>
</ul>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="c1"># Forecasting with an ETS(M,Ad,A) model to Australian beer production</span>
<span class="n">beer_fc</span> <span class="o">&lt;-</span> <span class="n">aus_production</span> <span class="o">%&gt;%</span>
  <span class="n">model</span><span class="p">(</span><span class="n">ets</span> <span class="o">=</span> <span class="n">ETS</span><span class="p">(</span><span class="n">log</span><span class="p">(</span><span class="n">Beer</span><span class="p">)</span> <span class="o">~</span> <span class="n">error</span><span class="p">(</span><span class="s2">&quot;M&quot;</span><span class="p">)</span> <span class="o">+</span> <span class="n">trend</span><span class="p">(</span><span class="s2">&quot;Ad&quot;</span><span class="p">)</span> <span class="o">+</span> <span class="n">season</span><span class="p">(</span><span class="s2">&quot;A&quot;</span><span class="p">)))</span> <span class="o">%&gt;%</span> 
  <span class="n">forecast</span><span class="p">(</span><span class="n">h</span> <span class="o">=</span> <span class="s2">&quot;3 years&quot;</span><span class="p">)</span>
<span class="c1"># Compute 80% and 95% forecast intervals</span>
<span class="n">beer_fc</span> <span class="o">%&gt;%</span> 
  <span class="n">hilo</span><span class="p">(</span><span class="n">level</span> <span class="o">=</span> <span class="n">c</span><span class="p">(</span><span class="mi">80</span><span class="p">,</span> <span class="mi">95</span><span class="p">))</span> <span class="o">%&gt;%</span>
  <span class="n">select</span><span class="p">(</span><span class="s1">&#39;80%&#39;</span><span class="p">,</span> <span class="s1">&#39;95%&#39;</span><span class="p">)</span> <span class="o">%&gt;%</span>
  <span class="k">as</span><span class="o">.</span><span class="n">character</span><span class="p">()</span>
</pre></div>
</div>
<p><img alt="" src="_images/mod14.png" /></p>
</div>
<div class="section" id="simple-forecasting-models">
<h2>Simple Forecasting Models<a class="headerlink" href="#simple-forecasting-models" title="Permalink to this headline">¶</a></h2>
<ul class="simple">
<li><p>These methods will serve as benchmarks rather than the method of choice</p></li>
</ul>
<div class="section" id="average-mean-method">
<h3>Average / Mean Method<a class="headerlink" href="#average-mean-method" title="Permalink to this headline">¶</a></h3>
<blockquote>
<div><p>Mean Model - the forecasts or the future predictions are equal to the average or mean of the historical data available</p>
</div></blockquote>
<p><img alt="" src="_images/mod7.png" /></p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="c1"># here we are using only a section from data</span>
<span class="n">bricks</span> <span class="o">&lt;-</span> <span class="n">aus_production</span> <span class="o">%&gt;%</span>
  <span class="n">filter_index</span><span class="p">(</span><span class="s2">&quot;1970 Q1&quot;</span> <span class="o">~</span> <span class="s2">&quot;2004 Q4&quot;</span><span class="p">)</span> <span class="o">%&gt;%</span>
  <span class="n">select</span><span class="p">(</span><span class="n">Bricks</span><span class="p">)</span>
</pre></div>
</div>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">MEAN()</span></code> function can be combined with <code class="docutils literal notranslate"><span class="pre">forecast()</span></code> where we can specify the forecasting period</p></li>
</ul>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">fit</span> <span class="o">&lt;-</span> <span class="n">bricks</span> <span class="o">%&gt;%</span>
  <span class="n">model</span><span class="p">(</span><span class="n">mean_model</span> <span class="o">=</span> <span class="n">MEAN</span><span class="p">(</span><span class="n">Bricks</span><span class="p">))</span>

<span class="n">fit</span> <span class="o">%&gt;%</span> <span class="n">forecast</span><span class="p">(</span><span class="n">h</span> <span class="o">=</span> <span class="s1">&#39;2 year&#39;</span><span class="p">)</span> <span class="o">%&gt;%</span>
  <span class="n">autoplot</span><span class="p">(</span><span class="n">bricks</span><span class="p">)</span>
</pre></div>
</div>
<p><img alt="" src="_images/mod8.png" /></p>
</div>
<div class="section" id="naive-method">
<h3>Naive Method<a class="headerlink" href="#naive-method" title="Permalink to this headline">¶</a></h3>
<blockquote>
<div><p>With Naive method, we set all the forecasts to the latest observation values. This method can be applied to many time series including most stock price data, and even if it is not a good forecasting method, it provides a useful benchmark for other forecasting methods.</p>
</div></blockquote>
<p><img alt="" src="_images/mod9.png" /></p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">fit</span> <span class="o">&lt;-</span> <span class="n">bricks</span> <span class="o">%&gt;%</span> <span class="n">model</span><span class="p">(</span><span class="n">NAIVE</span><span class="p">(</span><span class="n">Bricks</span><span class="p">))</span>

<span class="n">fit</span> <span class="o">%&gt;%</span> <span class="n">forecast</span><span class="p">(</span><span class="n">h</span> <span class="o">=</span> <span class="s1">&#39;2 year&#39;</span><span class="p">)</span> <span class="o">%&gt;%</span>
  <span class="n">autoplot</span><span class="p">(</span><span class="n">bricks</span><span class="p">)</span>
</pre></div>
</div>
<p><img alt="" src="_images/mod10.png" /></p>
<blockquote>
<div><p>A naïve forecast is optimal when data follow a <strong>random walk</strong>, this method is also called random walk forecasts and the RW() function can be used instead of NAIVE()</p>
</div></blockquote>
</div>
<div class="section" id="seasonal-naive-method">
<h3>Seasonal Naive Method<a class="headerlink" href="#seasonal-naive-method" title="Permalink to this headline">¶</a></h3>
<blockquote>
<div><p>A similar NAIVE method is useful for highly seasonal data. In this case, we set each forecast to be equal to the last observed value from the same season: for example, the forecast for January month values will be equal to the last observed January values [Ch.5]</p>
</div></blockquote>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">lag()</span></code> function is optional: we have a quartely data bricks and we specify a one-year lag</p></li>
</ul>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">fit</span> <span class="o">&lt;-</span> <span class="n">bricks</span> <span class="o">%&gt;%</span> <span class="n">model</span><span class="p">(</span><span class="n">SNAIVE</span><span class="p">(</span><span class="n">Bricks</span> <span class="o">~</span> <span class="n">lag</span><span class="p">(</span><span class="s2">&quot;year&quot;</span><span class="p">)))</span>
<span class="n">fit</span> <span class="o">%&gt;%</span> <span class="n">forecast</span><span class="p">(</span><span class="n">h</span> <span class="o">=</span> <span class="s1">&#39;2 year&#39;</span><span class="p">)</span> <span class="o">%&gt;%</span>
  <span class="n">autoplot</span><span class="p">(</span><span class="n">bricks</span><span class="p">)</span>
</pre></div>
</div>
<p><img alt="" src="_images/mod11.png" /></p>
</div>
<div class="section" id="drift-method">
<h3>Drift Method<a class="headerlink" href="#drift-method" title="Permalink to this headline">¶</a></h3>
<blockquote>
<div><p>A naive method where the forecasts are allowed to increase or decrease over time. The amount of change over time (called the drift) is set to be the average change in the historical data.</p>
</div></blockquote>
<ul class="simple">
<li><p>As mentioned in Ch.5: “This is equivalent to drawing a line between the first and last observations, and extrapolating it into the future.”</p></li>
</ul>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">fit</span> <span class="o">&lt;-</span> <span class="n">bricks</span> <span class="o">%&gt;%</span> <span class="n">model</span><span class="p">(</span><span class="n">RW</span><span class="p">(</span><span class="n">Bricks</span> <span class="o">~</span> <span class="n">drift</span><span class="p">()))</span>
<span class="n">fit</span> <span class="o">%&gt;%</span> <span class="n">forecast</span><span class="p">(</span><span class="n">h</span> <span class="o">=</span> <span class="s1">&#39;5 year&#39;</span><span class="p">)</span> <span class="o">%&gt;%</span>
  <span class="n">autoplot</span><span class="p">(</span><span class="n">bricks</span><span class="p">)</span>
</pre></div>
</div>
<p><img alt="" src="_images/mod12.png" /></p>
</div>
</div>
<div class="section" id="residual-diagnostics">
<h2>Residual Diagnostics<a class="headerlink" href="#residual-diagnostics" title="Permalink to this headline">¶</a></h2>
<ul class="simple">
<li><p>The innovation residuals are uncorrelated.</p></li>
<li><p>The innovation residuals have zero mean. [If they have a mean other than zero, then the forecasts are biased.]</p></li>
<li><p>The innovation residuals have constant variance. This is known as “homoscedasticity”.</p></li>
<li><p>The innovation residuals are normally distributed.</p></li>
</ul>
</div>
</div>

    <script type="text/x-thebe-config">
    {
        requestKernel: true,
        binderOptions: {
            repo: "binder-examples/jupyter-stacks-datascience",
            ref: "master",
        },
        codeMirrorConfig: {
            theme: "abcdef",
            mode: "python"
        },
        kernelOptions: {
            kernelName: "python3",
            path: "./."
        },
        predefinedOutput: true
    }
    </script>
    <script>kernelName = 'python3'</script>

              </div>
              
        
            <!-- Previous / next buttons -->
<div class='prev-next-area'> 
    <a class='left-prev' id="prev-link" href="random_walk.html" title="previous page">
        <i class="fas fa-angle-left"></i>
        <div class="prev-next-info">
            <p class="prev-next-subtitle">previous</p>
            <p class="prev-next-title">White Noise and Random Walk</p>
        </div>
    </a>
    <a class='right-next' id="next-link" href="week6.html" title="next page">
    <div class="prev-next-info">
        <p class="prev-next-subtitle">next</p>
        <p class="prev-next-title">ARIMA Models</p>
    </div>
    <i class="fas fa-angle-right"></i>
    </a>
</div>
        
        </div>
    </div>
    <footer class="footer">
    <div class="container">
      <p>
        
          By Olga Scrivner<br/>
        
            &copy; Copyright 2021.<br/>
      </p>
    </div>
  </footer>
</main>


      </div>
    </div>
  
  <script src="_static/js/index.be7d3bbb2ef33a8344ce.js"></script>

  </body>
</html>